{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/julietnu/Desktop/onTheAux/ota-mobile-v1/src/functional-components/FacebookAuthButton.tsx\";\nimport * as React from \"react\";\nimport * as WebBrowser from \"expo-web-browser\";\nimport { makeRedirectUri, useAuthRequest } from \"expo-auth-session\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Button } from \"react-native-paper\";\nimport { FB_ID } from \"../utils/Keys\";\nimport { AuthContext } from \"../utils/AuthProvider\";\nimport { useContext } from \"react\";\nWebBrowser.maybeCompleteAuthSession();\nvar discovery = {\n  authorizationEndpoint: \"https://www.facebook.com/v6.0/dialog/oauth\",\n  tokenEndpoint: \"https://graph.facebook.com/v6.0/oauth/access_token\"\n};\nvar useProxy = Platform.select({\n  web: false,\n  default: true\n});\nexport default function FacebookAuthButton() {\n  var _useContext = useContext(AuthContext),\n      login = _useContext.login;\n\n  var _useAuthRequest = useAuthRequest({\n    clientId: FB_ID,\n    scopes: [\"public_profile\", \"email\"],\n    redirectUri: makeRedirectUri({\n      useProxy: useProxy,\n      native: \"fb111111111111://authorize\"\n    }),\n    extraParams: {\n      display: Platform.select({\n        web: \"popup\"\n      }),\n      auth_type: \"rerequest\"\n    }\n  }, discovery),\n      _useAuthRequest2 = _slicedToArray(_useAuthRequest, 3),\n      request = _useAuthRequest2[0],\n      response = _useAuthRequest2[1],\n      promptAsync = _useAuthRequest2[2];\n\n  React.useEffect(function () {\n    if ((response == null ? void 0 : response.type) === \"success\") {\n      var code = response.params.code;\n    }\n  }, [response]);\n  return React.createElement(Button, {\n    mode: \"outlined\",\n    disabled: !request,\n    onPress: function onPress() {\n      promptAsync({\n        useProxy: useProxy,\n        windowFeatures: {\n          width: 700,\n          height: 600\n        }\n      });\n      login();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, \"Sign in with Facebook\");\n}","map":{"version":3,"sources":["/Users/julietnu/Desktop/onTheAux/ota-mobile-v1/src/functional-components/FacebookAuthButton.tsx"],"names":["React","WebBrowser","makeRedirectUri","useAuthRequest","Button","FB_ID","AuthContext","useContext","maybeCompleteAuthSession","discovery","authorizationEndpoint","tokenEndpoint","useProxy","Platform","select","web","default","FacebookAuthButton","login","clientId","scopes","redirectUri","native","extraParams","display","auth_type","request","response","promptAsync","useEffect","type","code","params","windowFeatures","width","height"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,UAAZ,MAA4B,kBAA5B;AACA,SAASC,eAAT,EAA0BC,cAA1B,QAAgD,mBAAhD;;AAEA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,KAAT;AACA,SAASC,WAAT;AACA,SAASC,UAAT,QAA2B,OAA3B;AAEAN,UAAU,CAACO,wBAAX;AAGA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,qBAAqB,EAAE,4CADP;AAEhBC,EAAAA,aAAa,EAAE;AAFC,CAAlB;AAKA,IAAMC,QAAQ,GAAGC,QAAQ,CAACC,MAAT,CAAgB;AAAEC,EAAAA,GAAG,EAAE,KAAP;AAAcC,EAAAA,OAAO,EAAE;AAAvB,CAAhB,CAAjB;AAEA,eAAe,SAASC,kBAAT,GAA8B;AAAA,oBACzBV,UAAU,CAACD,WAAD,CADe;AAAA,MACnCY,KADmC,eACnCA,KADmC;;AAAA,wBAGFf,cAAc,CACrD;AACEgB,IAAAA,QAAQ,EAAEd,KADZ;AAEEe,IAAAA,MAAM,EAAE,CAAC,gBAAD,EAAmB,OAAnB,CAFV;AAIEC,IAAAA,WAAW,EAAEnB,eAAe,CAAC;AAC3BU,MAAAA,QAAQ,EAARA,QAD2B;AAI3BU,MAAAA,MAAM,EAAE;AAJmB,KAAD,CAJ9B;AAUEC,IAAAA,WAAW,EAAE;AAEXC,MAAAA,OAAO,EAAEX,QAAQ,CAACC,MAAT,CAAgB;AAAEC,QAAAA,GAAG,EAAE;AAAP,OAAhB,CAFE;AAIXU,MAAAA,SAAS,EAAE;AAJA;AAVf,GADqD,EAkBrDhB,SAlBqD,CAHZ;AAAA;AAAA,MAGpCiB,OAHoC;AAAA,MAG3BC,QAH2B;AAAA,MAGjBC,WAHiB;;AAwB3C5B,EAAAA,KAAK,CAAC6B,SAAN,CAAgB,YAAM;AACpB,QAAI,CAAAF,QAAQ,QAAR,YAAAA,QAAQ,CAAEG,IAAV,MAAmB,SAAvB,EAAkC;AAAA,UACxBC,IADwB,GACfJ,QAAQ,CAACK,MADM,CACxBD,IADwB;AAEjC;AACF,GAJD,EAIG,CAACJ,QAAD,CAJH;AAMA,SACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,QAAQ,EAAE,CAACD,OAFb;AAGE,IAAA,OAAO,EAAE,mBAAM;AACbE,MAAAA,WAAW,CAAC;AACVhB,QAAAA,QAAQ,EAARA,QADU;AAEVqB,QAAAA,cAAc,EAAE;AAAEC,UAAAA,KAAK,EAAE,GAAT;AAAcC,UAAAA,MAAM,EAAE;AAAtB;AAFN,OAAD,CAAX;AAKAjB,MAAAA,KAAK;AACN,KAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF;AAeD","sourcesContent":["import * as React from \"react\";\nimport * as WebBrowser from \"expo-web-browser\";\nimport { makeRedirectUri, useAuthRequest } from \"expo-auth-session\";\nimport { Platform } from \"react-native\";\nimport { Button } from \"react-native-paper\";\nimport { FB_ID } from \"../utils/Keys\";\nimport { AuthContext } from \"../utils/AuthProvider\";\nimport { useContext } from \"react\";\n\nWebBrowser.maybeCompleteAuthSession();\n\n// Endpoint\nconst discovery = {\n  authorizationEndpoint: \"https://www.facebook.com/v6.0/dialog/oauth\",\n  tokenEndpoint: \"https://graph.facebook.com/v6.0/oauth/access_token\",\n};\n\nconst useProxy = Platform.select({ web: false, default: true });\n\nexport default function FacebookAuthButton() {\n  const { login } = useContext(AuthContext);\n\n  const [request, response, promptAsync] = useAuthRequest(\n    {\n      clientId: FB_ID,\n      scopes: [\"public_profile\", \"email\"],\n      // For usage in managed apps using the proxy\n      redirectUri: makeRedirectUri({\n        useProxy,\n        // For usage in bare and standalone\n        // Use your FBID here. The path MUST be `authorize`.\n        native: \"fb111111111111://authorize\",\n      }),\n      extraParams: {\n        // Use `popup` on web for a better experience\n        display: Platform.select({ web: \"popup\" }) as any,\n        // Optionally you can use this to rerequest declined permissions\n        auth_type: \"rerequest\",\n      },\n    },\n    discovery\n  );\n\n  React.useEffect(() => {\n    if (response?.type === \"success\") {\n      const { code } = response.params;\n    }\n  }, [response]);\n\n  return (\n    <Button\n      mode=\"outlined\"\n      disabled={!request}\n      onPress={() => {\n        promptAsync({\n          useProxy,\n          windowFeatures: { width: 700, height: 600 },\n        } as any);\n        // redirect to app tabs\n        login();\n      }}>\n      Sign in with Facebook\n    </Button>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}